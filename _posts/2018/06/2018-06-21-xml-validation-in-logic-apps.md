---
layout: post
title:  "Xml Validation in a Logic App!"
date:   2018-06-21 13:28:37 -0400
categories: azure logic-app xml
---

I've done some work with Logic Apps recently and got hung up on using the XML Validation.  I started with a great Azure quickstart titled [201-logic-app-veter-pipeline][veter-pipeline] that creates the following elements in the Logic App designer. 

![Workflow generated by the template]({{ site.postassetimagesurl }}/xml-validation-in-logic-apps-xml-validation-generated.PNG "Workflow generated by the template")

This works swimmingly when the xml is valid, however, when the xml does not conform to the xsd specified in the  attached integration account, it makes the whole process fail.  This likely works as intended but I'd like to log this failure to an external system and control the message back to the user.  

There are two keys to making this work correctly, the first is making sure the condition runs on "Failed, Succeeded" by pressing the ellipse on the condition box and selecting "Configure run after", then adding the following action in the conditional:

{% highlight LogicApp %}
actions('XML_Validation').status 'is equal to' 'Succeeded'
{% endhighlight %}

![Workflow generated by the template]({{ site.postassetimagesurl }}/xml-validation-in-logic-apps-xml-validation-final.png "Workflow generated by the template")

You'll have full access to the output of the XML_Validation's output on and could potentially log something like actions('XML_Validation')['outputs']['errors'] or just the Body of the XML Validation block.


[veter-pipeline]: https://github.com/Azure/azure-quickstart-templates/tree/master/201-logic-app-veter-pipeline